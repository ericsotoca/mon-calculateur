<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculateur Carbone ‚Äì Single File</title>
    <meta name="description" content="Estimez votre empreinte carbone annuelle simplement.">
    
    <!-- Favicon g√©n√©rique pour √©viter les erreurs 404 -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üå±</text></svg>">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    
    <!-- Recharts -->
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/recharts/2.12.3/Recharts.min.js"></script>
    
    <!-- Babel -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.10/babel.min.js"></script>

    <style>
        body { font-family: 'Segoe UI', system-ui, sans-serif; -webkit-font-smoothing: antialiased; }
        .fade-in { animation: fadeIn .6s cubic-bezier(0.16, 1, 0.3, 1); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        /* Custom scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 selection:bg-green-100 selection:text-green-900">
    
    <div id="root" class="flex flex-col items-center justify-center min-h-screen">
        <div class="flex flex-col items-center animate-pulse space-y-4">
            <div class="w-12 h-12 border-4 border-green-500 border-t-transparent rounded-full animate-spin"></div>
            <div class="text-xl font-semibold text-gray-500">Chargement du calculateur...</div>
        </div>
    </div>

    <script type="text/babel">
        // V√©rification des d√©pendances
        if (!window.React || !window.Recharts) {
            document.getElementById('root').innerHTML = '<div class="text-red-500 text-center p-10">Erreur : Les librairies externes ne sont pas charg√©es.<br>V√©rifiez votre connexion internet.</div>';
            throw new Error("Librairies manquantes");
        }

        const { useState, useEffect, useMemo } = React;
        const { PieChart, Pie, Cell, LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } = Recharts;

        /* ---------- COMPOSANTS ICONES ---------- */
        const IconLeaf = () => <svg className="w-6 h-6" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><path d="M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.77 10-10 10Z"/><path d="M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12"/></svg>;
        const IconCar = () => <svg className="w-6 h-6" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><path d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2"/><circle cx="7" cy="17" r="2"/><circle cx="17" cy="17" r="2"/></svg>;
        const IconHome = () => <svg className="w-6 h-6" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>;
        const IconWifi = () => <svg className="w-6 h-6" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><path d="M12 20h.01"/><path d="M2 8.82a15 15 0 0 1 20 0"/><path d="M5 12.859a10 10 0 0 1 14 0"/><path d="M8.5 16.429a5 5 0 0 1 7 0"/></svg>;
        const IconReset = () => <svg className="w-4 h-4 mr-2" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>;
        const IconShare = () => <svg className="w-4 h-4 mr-2" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" y1="2" x2="12" y2="15"/></svg>;

        /* ---------- CONSTANTES DE CALCUL ---------- */
        // Facteurs d'√©mission (kg CO2e par unit√©)
        const EMISSION_FACTORS = {
            alimentation: { omnivore: 3, vegetarien: 1.7, vegan: 1.5, jeune: 0 }, // par repas
            transport: { voiture: 0.192, bus: 0.105, train: 0.041, avion: 0.255 }, // par km
            logement: { electricite: 0.053, gaz: 0.206, fioul: 0.267, bois: 0.025 }, // par kWh
            numerique: { donnees: 0.06, streaming: 0.05 } // Go/mois, h/streaming
        };
        
        const MOY_FR = 9400; // 9.4 tonnes
        const COLORS = ['#10b981', '#3b82f6', '#f97316', '#a855f7']; // Couleurs graphiques

        const VALEURS_MOYENNES = {
            repasOmnivore: '8', repasVegetarien: '4', repasVegan: '2', repasJeune: '0',
            voiture: '7500', bus: '0', train: '2000', avion: '0',
            electricite: '200', gaz: '100', fioul: '0', bois: '0',
            donnees: '50', streaming: '2'
        };

        function CarbonCalculator() {
            const [formData, setFormData] = useState(() => {
                try { return { ...VALEURS_MOYENNES, ...JSON.parse(localStorage.getItem('carbonForm')) }; } catch { return VALEURS_MOYENNES; }
            });
            const [results, setResults] = useState(null);
            const [history, setHistory] = useState(() => {
                try { return JSON.parse(localStorage.getItem('carbonHistory')) || []; } catch { return []; }
            });
            const [transportView, setTransportView] = useState('an');
            const [message, setMessage] = useState(null); // Pour afficher "Copi√© !"

            // Sauvegarde automatique
            useEffect(() => { localStorage.setItem('carbonForm', JSON.stringify(formData)); }, [formData]);

            const handleChange = e => setFormData({ ...formData, [e.target.name]: e.target.value });

            // Helper : conversion vers annuel pour le transport
            const toAnnual = v => {
                const val = parseFloat(v) || 0;
                return transportView === 'semaine' ? val * 52 : transportView === 'mois' ? val * 12 : val;
            };

            const calculate = () => {
                // Calcul Alimentation (repas/semaine * 52 semaines)
                const alim = ((parseFloat(formData.repasOmnivore)||0) * EMISSION_FACTORS.alimentation.omnivore +
                              (parseFloat(formData.repasVegetarien)||0) * EMISSION_FACTORS.alimentation.vegetarien +
                              (parseFloat(formData.repasVegan)||0) * EMISSION_FACTORS.alimentation.vegan) * 52;
                
                // Calcul Transport
                const trans = toAnnual(formData.voiture) * EMISSION_FACTORS.transport.voiture +
                              toAnnual(formData.bus) * EMISSION_FACTORS.transport.bus +
                              toAnnual(formData.train) * EMISSION_FACTORS.transport.train +
                              toAnnual(formData.avion) * EMISSION_FACTORS.transport.avion;

                // Calcul Logement (conso mois * 12 mois)
                const log = ((parseFloat(formData.electricite)||0) * EMISSION_FACTORS.logement.electricite +
                             (parseFloat(formData.gaz)||0) * EMISSION_FACTORS.logement.gaz +
                             (parseFloat(formData.fioul)||0) * EMISSION_FACTORS.logement.fioul +
                             (parseFloat(formData.bois)||0) * EMISSION_FACTORS.logement.bois) * 12;

                // Calcul Num√©rique
                const num = (parseFloat(formData.donnees)||0) * EMISSION_FACTORS.numerique.donnees * 12 +
                            (parseFloat(formData.streaming)||0) * EMISSION_FACTORS.numerique.streaming * 365;

                const total = alim + trans + log + num;
                
                const res = {
                    alimentation: Math.round(alim),
                    transport: Math.round(trans),
                    logement: Math.round(log),
                    numerique: Math.round(num),
                    total: Math.round(total),
                    tonnes: (total / 1000).toFixed(2),
                    date: new Date().toISOString()
                };

                setResults(res);
                
                // Gestion historique (max 10 entr√©es)
                const h = [...history, res].slice(-10);
                setHistory(h);
                localStorage.setItem('carbonHistory', JSON.stringify(h));
                
                // Scroll vers les r√©sultats
                setTimeout(() => document.getElementById('results-section')?.scrollIntoView({ behavior: 'smooth' }), 100);
            };

            const reset = () => {
                if(!confirm("Tout effacer ?")) return;
                setFormData(VALEURS_MOYENNES);
                setTransportView('an');
                setResults(null);
                localStorage.removeItem('carbonForm');
            };

            const shareResults = () => {
                if (!results) return;
                const text = `üåç Mon empreinte carbone estim√©e : ${results.tonnes} tonnes CO‚ÇÇe / an.\nCalculez la v√¥tre !`;
                
                if (navigator.share) {
                    navigator.share({ title: 'Empreinte Carbone', text, url: window.location.href })
                        .catch(() => {});
                } else {
                    navigator.clipboard.writeText(text + " " + window.location.href);
                    setMessage("Lien copi√© !");
                    setTimeout(() => setMessage(null), 2000);
                }
            };

            const repasTotal = (parseFloat(formData.repasOmnivore)||0) +
                               (parseFloat(formData.repasVegetarien)||0) +
                               (parseFloat(formData.repasVegan)||0) +
                               (parseFloat(formData.repasJeune)||0);

            const pieData = results ? [
                { name: 'Alimentation', value: results.alimentation },
                { name: 'Transport', value: results.transport },
                { name: 'Logement', value: results.logement },
                { name: 'Num√©rique', value: results.numerique }
            ] : [];

            return (
                <div className="max-w-5xl mx-auto p-4 md:p-8 fade-in pb-20">
                    <header className="text-center mb-10">
                        <div className="flex justify-center items-center text-green-600 mb-2">
                            <IconLeaf />
                            <h1 className="text-3xl md:text-4xl font-bold ml-2 tracking-tight">Calculateur Carbone</h1>
                        </div>
                        <p className="text-slate-500">Une estimation simple de votre impact annuel (kg CO‚ÇÇe)</p>
                    </header>

                    <div className="grid md:grid-cols-2 gap-6 mb-8">
                        {/* --- CARD ALIMENTATION --- */}
                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 hover:shadow-md transition-shadow relative overflow-hidden">
                            <div className="absolute top-0 left-0 w-full h-1 bg-green-500"></div>
                            <h2 className="text-lg font-bold mb-2 flex items-center text-slate-700"><IconLeaf /><span className="ml-2">Alimentation</span></h2>
                            <p className="text-xs text-slate-500 mb-4">Repas par semaine (total : <span className={repasTotal === 14 ? 'text-green-600 font-bold' : 'text-orange-500 font-bold'}>{repasTotal}</span> / 14)</p>
                            <div className="space-y-3">
                                {[
                                    { key: 'repasOmnivore', label: 'Omnivore (viande rouge/blanche)' },
                                    { key: 'repasVegetarien', label: 'V√©g√©tarien (lait/oeufs)' },
                                    { key: 'repasVegan', label: 'V√©g√©talien (aucun produit animal)' },
                                    { key: 'repasJeune', label: 'Je√ªne / saut√©' }
                                ].map(x => (
                                    <div key={x.key} className="flex justify-between items-center group">
                                        <label className="text-sm text-slate-600 group-hover:text-green-600 transition-colors">{x.label}</label>
                                        <input type="number" min="0" name={x.key} value={formData[x.key]} onChange={handleChange} className="w-20 p-2 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-green-500 outline-none text-center font-medium transition-all" />
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* --- CARD TRANSPORT --- */}
                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 hover:shadow-md transition-shadow relative overflow-hidden">
                            <div className="absolute top-0 left-0 w-full h-1 bg-blue-500"></div>
                            <div className="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-2 gap-2">
                                <h2 className="text-lg font-bold flex items-center text-slate-700"><IconCar /><span className="ml-2">Transport</span></h2>
                                <div className="bg-slate-100 p-1 rounded-lg flex text-xs font-semibold">
                                    {['semaine', 'mois', 'an'].map(v => (
                                        <button key={v} onClick={() => setTransportView(v)} className={`px-3 py-1.5 rounded-md capitalize transition-all ${transportView === v ? 'bg-white text-blue-600 shadow-sm' : 'text-slate-500 hover:text-blue-500'}`}>{v}</button>
                                    ))}
                                </div>
                            </div>
                            <p className="text-xs text-slate-500 mb-4">Distance estim√©e par <span className="text-blue-600 font-bold">{transportView}</span> (km)</p>
                            <div className="space-y-3">
                                {['voiture', 'bus', 'train', 'avion'].map(m => (
                                    <div key={m} className="flex justify-between items-center group">
                                        <label className="capitalize text-sm text-slate-600 w-24 group-hover:text-blue-600 transition-colors">{m}</label>
                                        <input type="number" min="0" name={m} value={formData[m]} onChange={handleChange} className="w-full p-2 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none font-medium transition-all" />
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* --- CARD LOGEMENT --- */}
                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 hover:shadow-md transition-shadow relative overflow-hidden">
                            <div className="absolute top-0 left-0 w-full h-1 bg-orange-500"></div>
                            <h2 className="text-lg font-bold mb-2 flex items-center text-slate-700"><IconHome /><span className="ml-2">Logement (kWh/mois)</span></h2>
                            <p className="text-xs text-slate-500 mb-4">Consommation moyenne mensuelle</p>
                            <div className="grid grid-cols-2 gap-4">
                                {['electricite', 'gaz', 'fioul', 'bois'].map(k => (
                                    <div key={k}>
                                        <label className="text-xs font-bold uppercase text-slate-400 block mb-1">{k}</label>
                                        <input type="number" min="0" name={k} value={formData[k]} onChange={handleChange} className="w-full p-2 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-orange-500 outline-none font-medium transition-all" />
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* --- CARD NUMERIQUE --- */}
                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 hover:shadow-md transition-shadow relative overflow-hidden">
                            <div className="absolute top-0 left-0 w-full h-1 bg-purple-500"></div>
                            <h2 className="text-lg font-bold mb-2 flex items-center text-slate-700"><IconWifi /><span className="ml-2">Num√©rique</span></h2>
                            <p className="text-xs text-slate-500 mb-4">Usages quotidiens et mensuels</p>
                            <div className="space-y-4">
                                <div>
                                    <label className="block text-sm mb-1 text-slate-600">Donn√©es mobiles/fixes (Go/mois)</label>
                                    <input type="number" min="0" name="donnees" value={formData.donnees} onChange={handleChange} className="w-full p-2 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none font-medium transition-all" />
                                </div>
                                <div>
                                    <label className="block text-sm mb-1 text-slate-600">Streaming vid√©o (heures/jour)</label>
                                    <input type="number" min="0" step="0.5" name="streaming" value={formData.streaming} onChange={handleChange} className="w-full p-2 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none font-medium transition-all" />
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="text-center mb-12 space-y-4">
                        <button onClick={calculate} className="bg-slate-800 text-white px-10 py-3 rounded-xl text-lg font-bold hover:bg-slate-900 transition shadow-lg hover:shadow-xl transform hover:-translate-y-1 active:translate-y-0">
                            Calculer mon empreinte
                        </button>
                        <div className="flex justify-center items-center gap-6">
                            <button onClick={reset} className="text-slate-400 text-sm hover:text-slate-700 flex items-center transition-colors"><IconReset /> R√©initialiser</button>
                        </div>
                    </div>

                    {results && (
                        <div id="results-section" className="fade-in space-y-8 pb-12">
                            
                            {/* SCORE PRINCIPAL */}
                            <div className="bg-white p-8 rounded-3xl shadow-lg border border-slate-100 text-center relative overflow-hidden">
                                <div className="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-green-400 via-blue-500 to-purple-500"></div>
                                <div className="flex justify-center items-end gap-2 mb-2">
                                    <div className="text-6xl md:text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-green-600 to-blue-600 leading-tight">
                                        {results.tonnes}
                                    </div>
                                    <div className="text-xl md:text-2xl font-bold text-slate-400 mb-2">t CO‚ÇÇe</div>
                                </div>
                                <p className="text-slate-500 mb-6">votre empreinte annuelle estim√©e</p>
                                
                                <div className="inline-flex flex-col md:flex-row items-center bg-slate-50 px-6 py-3 rounded-xl border border-slate-200 text-sm">
                                    <span className="mr-2 text-slate-500">Moyenne d'un Fran√ßais :</span>
                                    <span className="font-bold text-slate-700">{(MOY_FR / 1000).toFixed(1)} tonnes</span>
                                </div>

                                <div className="mt-6 flex justify-center">
                                     <button onClick={shareResults} className="text-blue-600 hover:text-blue-800 bg-blue-50 hover:bg-blue-100 px-4 py-2 rounded-lg text-sm font-semibold flex items-center transition-colors">
                                        <IconShare /> {message ? message : "Partager mon r√©sultat"}
                                     </button>
                                </div>
                            </div>

                            {/* GRAPHIQUES */}
                            <div className="grid md:grid-cols-2 gap-6">
                                <div className="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 h-80 flex flex-col">
                                    <h3 className="text-center font-bold text-slate-700 mb-4">R√©partition par poste</h3>
                                    <div className="flex-1 min-h-0">
                                        <ResponsiveContainer width="100%" height="100%">
                                            <PieChart>
                                                <Pie data={pieData} cx="50%" cy="50%" innerRadius={60} outerRadius={80} paddingAngle={5} dataKey="value">
                                                    {pieData.map((entry, index) => (
                                                        <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} stroke="none" />
                                                    ))}
                                                </Pie>
                                                <Tooltip formatter={(value) => [`${Math.round(value)} kg`, 'CO‚ÇÇe']} contentStyle={{borderRadius: '8px', border:'none', boxShadow:'0 4px 6px -1px rgba(0,0,0,0.1)'}} />
                                                <Legend verticalAlign="bottom" height={36} iconType="circle" />
                                            </PieChart>
                                        </ResponsiveContainer>
                                    </div>
                                </div>

                                {history.length > 0 && (
                                    <div className="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 h-80 flex flex-col">
                                        <h3 className="text-center font-bold text-slate-700 mb-4">Votre historique</h3>
                                        <div className="flex-1 min-h-0">
                                            <ResponsiveContainer width="100%" height="100%">
                                                <LineChart data={history} margin={{ top: 5, right: 20, bottom: 5, left: 0 }}>
                                                    <CartesianGrid stroke="#f1f5f9" strokeDasharray="3 3" vertical={false} />
                                                    <XAxis dataKey="date" tickFormatter={d => new Date(d).toLocaleDateString(undefined, {day:'numeric', month:'short'})} tick={{fontSize: 12, fill: '#94a3b8'}} axisLine={false} tickLine={false} />
                                                    <YAxis tick={{fontSize: 12, fill: '#94a3b8'}} axisLine={false} tickLine={false} width={40} />
                                                    <Tooltip labelFormatter={l => new Date(l).toLocaleString()} formatter={(v) => [`${(v/1000).toFixed(2)} t`, 'Total']} contentStyle={{borderRadius: '8px', border:'none', boxShadow:'0 4px 6px -1px rgba(0,0,0,0.1)'}} />
                                                    <Line type="monotone" dataKey="total" stroke="#8b5cf6" strokeWidth={3} dot={{r: 4, fill:'#8b5cf6'}} activeDot={{r: 6}} />
                                                </LineChart>
                                            </ResponsiveContainer>
                                        </div>
                                    </div>
                                )}
                            </div>

                            {/* TABLEAU DE BORD DETAILLE */}
                            <div className="bg-white p-6 md:p-8 rounded-3xl shadow-sm border border-slate-100">
                                <h3 className="text-2xl font-bold text-slate-800 mb-8 text-center">D√©tail du calcul (kg CO‚ÇÇe / an)</h3>
                                <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                                    {[
                                        { 
                                            cat: 'Alimentation', icon: <IconLeaf />, color: 'text-green-600', bg: 'bg-green-50', 
                                            vals: { 
                                                Omnivore: (parseFloat(formData.repasOmnivore)||0) * EMISSION_FACTORS.alimentation.omnivore * 52,
                                                V√©g√©tarien: (parseFloat(formData.repasVegetarien)||0) * EMISSION_FACTORS.alimentation.vegetarien * 52,
                                                V√©gan: (parseFloat(formData.repasVegan)||0) * EMISSION_FACTORS.alimentation.vegan * 52,
                                                Je√ªne: 0
                                            } 
                                        },
                                        { 
                                            cat: 'Transport', icon: <IconCar />, color: 'text-blue-600', bg: 'bg-blue-50',
                                            vals: { 
                                                Voiture: toAnnual(formData.voiture) * EMISSION_FACTORS.transport.voiture,
                                                Bus: toAnnual(formData.bus) * EMISSION_FACTORS.transport.bus,
                                                Train: toAnnual(formData.train) * EMISSION_FACTORS.transport.train,
                                                Avion: toAnnual(formData.avion) * EMISSION_FACTORS.transport.avion
                                            } 
                                        },
                                        { 
                                            cat: 'Logement', icon: <IconHome />, color: 'text-orange-600', bg: 'bg-orange-50',
                                            vals: { 
                                                √âlectricit√©: (parseFloat(formData.electricite)||0) * EMISSION_FACTORS.logement.electricite * 12,
                                                Gaz: (parseFloat(formData.gaz)||0) * EMISSION_FACTORS.logement.gaz * 12,
                                                Fioul: (parseFloat(formData.fioul)||0) * EMISSION_FACTORS.logement.fioul * 12,
                                                Bois: (parseFloat(formData.bois)||0) * EMISSION_FACTORS.logement.bois * 12
                                            } 
                                        },
                                        { 
                                            cat: 'Num√©rique', icon: <IconWifi />, color: 'text-purple-600', bg: 'bg-purple-50',
                                            vals: { 
                                                Donn√©es: (parseFloat(formData.donnees)||0) * EMISSION_FACTORS.numerique.donnees * 12,
                                                Streaming: (parseFloat(formData.streaming)||0) * EMISSION_FACTORS.numerique.streaming * 365
                                            } 
                                        }
                                    ].map((bl) => {
                                        const subTotal = Object.values(bl.vals).reduce((a, b) => a + b, 0);
                                        return (
                                            <div key={bl.cat} className="rounded-2xl p-5 border border-slate-100 hover:border-slate-300 transition-colors">
                                                <div className={`flex items-center mb-4 pb-3 border-b border-slate-100 ${bl.color}`}>
                                                    <div className={`p-2 rounded-lg ${bl.bg} mr-3`}>{bl.icon}</div>
                                                    <h4 className="font-bold text-lg">{bl.cat}</h4>
                                                </div>
                                                <ul className="space-y-3 text-sm">
                                                    {Object.entries(bl.vals).map(([k, v]) => v > 0 && (
                                                        <li key={k} className="flex justify-between items-center">
                                                            <span className="text-slate-500">{k}</span>
                                                            <span className="font-semibold text-slate-700">{Math.round(v).toLocaleString()}</span>
                                                        </li>
                                                    ))}
                                                    <li className="flex justify-between pt-3 mt-1 border-t border-slate-100 font-bold text-slate-800 text-base">
                                                        <span>Total</span>
                                                        <span>{Math.round(subTotal).toLocaleString()} kg</span>
                                                    </li>
                                                </ul>
                                            </div>
                                        );
                                    })}
                                </div>
                            </div>
                            
                            <div className="text-center text-xs text-slate-400 pt-8 pb-4">
                                <p>Les valeurs sont des estimations bas√©es sur des facteurs moyens de l'ADEME.</p>
                                <p>¬© 2025 Calculateur Carbone. Code open-source.</p>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<CarbonCalculator />);
    </script>
</body>
</html>
